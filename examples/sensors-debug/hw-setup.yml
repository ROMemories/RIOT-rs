buses: # TODO: rename this? Shared communication interfaces
  i2c:
    - name: I2C0
      peripheral:
        TWISPI0:
          on: nrf52840
          sda:
            - pin: P0_03
              on: nrf52840dk
              pull_up: false
          scl:
            - pin: P0_04
              on: nrf52840dk
              pull_up: false
          frequency: !K100
        SERIAL0:
          on: nrf5340
          sda:
            - pin: P0_04
              on: nrf5340dk
              pull_up: false
          scl:
            - pin: P0_05
              on: nrf5340dk
              pull_up: false
          frequency: !K100
        I2C0:
          on: rp2040
          sda:
            - pin: PIN_4
          scl:
            - pin: PIN_5
          frequency: !K100
    - name: I2C1
      peripheral:
        TWISPI1:
          on: nrf52840
          sda:
            - pin: P0_02
              on: nrf52840dk
              pull_up: false
          scl:
            - pin: P0_26
              on: nrf52840dk
              pull_up: false
          frequency: !K100
        SERIAL1:
          on: nrf5340
          sda:
            - pin: P0_01
              on: nrf5340dk
              pull_up: false
          scl:
            - pin: P1_02
              on: nrf5340dk
              pull_up: false
          frequency: !K100
        I2C1:
          on: rp2040
          sda:
            - pin: PIN_2
          scl:
            - pin: PIN_3
          frequency: !K100
  spi:
    - name: SPI0
      peripheral:
        SPI2:
          on: nrf52840
          sck:
            - pin: P0_31
              on: nrf52840dk
          miso:
            - pin: P0_29
              on: nrf52840dk
          mosi:
            - pin: P0_30
              on: nrf52840dk
          frequency: !M2
          mode: !Mode3
          bit_order: !MsbFirst
        SERIAL2:
          on: nrf5340
          sck:
            - pin: P0_26
              on: nrf5340dk
          miso:
            - pin: P0_07
              on: nrf5340dk
          mosi:
            - pin: P0_25
              on: nrf5340dk
          frequency: !M2
          mode: !Mode3
          bit_order: !MsbFirst
        SPI0:
          on: rp2040
          sck:
            - pin: PIN_18
          miso:
            - pin: PIN_16
          mosi:
            - pin: PIN_19
          frequency: !M2
          mode: !Mode3
    - name: SPI1
      peripheral:
        SPI3:
          on: nrf52840
          sck:
            - pin: P1_15
              on: nrf52840dk
          miso:
            - pin: P1_13
              on: nrf52840dk
          mosi:
            - pin: P1_14
              on: nrf52840dk
          frequency: !M2
          mode: !Mode3
          bit_order: !MsbFirst
        SERIAL3:
          on: nrf5340
          sck:
            - pin: P1_15
              on: nrf5340dk
          miso:
            - pin: P1_13
              on: nrf5340dk
          mosi:
            - pin: P1_14
              on: nrf5340dk
          frequency: !M2
          mode: !Mode3
          bit_order: !MsbFirst
        SPI1:
          on: rp2040
          sck:
            - pin: PIN_14
          miso:
            - pin: PIN_12
          mosi:
            - pin: PIN_15
          frequency: !M2
          mode: !Mode3


sensors:
  connected:
    - name: TEMP_SENSOR
      driver: '@riot_rs::embassy::arch::internal_temp::InternalTemp'
      label: 'internal'
      on: nrf52

    - name: BUTTON_1
      driver: '@riot_rs_builtin_sensors::push_buttons::PushButton'
      label: 'btn1'
      on: nrf52840dk
      when: button-readings
      peripherals:
        - !input
          on: nrf52840dk
          pin: P0_11
          pull: !up  # FIXME

    # - name: ACCEL
    #   driver: '@riot_rs_builtin_sensors::lis3dh::Lis3dhI2c'
    #   label: 'i2c'
    #   with:
    #     mode: '@riot_rs_builtin_sensors::lis3dh::Mode::Normal'
    #     enable_z_axis: true
    #   bus:
    #     !i2c
    #     I2C0:
    #
    # - name: ACCEL2
    #   driver: '@riot_rs_builtin_sensors::lis3dh::Lis3dhI2c'
    #   label: 'i2c2'
    #   with:
    #     mode: '@riot_rs_builtin_sensors::lis3dh::Mode::Normal'
    #     enable_z_axis: true
    #   bus:
    #     !i2c
    #     I2C1:

    - name: ACCEL_SPI
      driver: '@riot_rs_builtin_sensors::lis3dh::Lis3dhSpi'
      label: 'spi'
      with:
        mode: '@riot_rs_builtin_sensors::lis3dh::Mode::Normal'
        enable_z_axis: true
      bus:
        !spi
        SPI0:
          cs:
            - pin: P0_28
              on: nrf52840dk
            - pin: P0_06
              on: nrf5340dk
            - pin: PIN_17
              on: rp2040

    - name: ACCEL_SPI2
      driver: '@riot_rs_builtin_sensors::lis3dh::Lis3dhSpi'
      label: 'spi2'
      with:
        mode: '@riot_rs_builtin_sensors::lis3dh::Mode::Normal'
        enable_z_axis: true
      bus:
        !spi
        SPI1:
          cs:
            - pin: P1_12
              on: nrf52840dk
            - pin: P1_12
              on: nrf5340dk
            - pin: PIN_13
              on: rp2040

  # - name: HUMID_TEMP
  #   driver: riot_rs_builtin_sensors::aht20::Aht20I2c
  #   label: 'indoor'
  #   bus:
  #     !i2c
  #     I2C0:
